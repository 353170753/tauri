<!DOCTYPE html>
<html>
<body>
  <script>
    function notify(route, args) {
      var xhr = new XMLHttpRequest()
      xhr.open('POST', 'http://localhost:7000/' + route)
      xhr.setRequestHeader('Content-type', 'application/json')
      xhr.send(JSON.stringify(args))
      xhr.onload = xhr.onerror = xhr.onabort = function () {
        window.tauri.invoke({ cmd: 'exit' })
      }
    }

    window.onTauriInit = function () {
      window.tauri.listen('reply', function (res) {
        notify('reply', res.payload)
      })
      window.tauri.emit('hello')
    }
  </script>
</body>

</html>